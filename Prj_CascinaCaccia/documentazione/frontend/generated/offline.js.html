<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: offline.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: offline.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * @file: offline.js
 * @author: InnoVive
 * This script manages the user's heartbeat to keep the session alive by periodically sending
 * a request to the server. It checks if the user email exists in the cookies and, if so, sends a
 * heartbeat request every 10 seconds.
 * 
 */

/**
 * Sends a heartbeat request to the server to keep the user session alive.
 * This function is invoked every 10 seconds if a valid user email is found in the cookies.
 * 
 * @function
 * @param {string} email - The user's email fetched from the cookies.
 * @returns {void}
 */
const email = getCookie("userEmail");

if (email) {
    setInterval(() => {
        /**
         * Sends a POST request to the server to indicate the user is active.
         * This request is sent every 10 seconds if the user's email exists.
         * 
         * @async
         * @function
         * @returns {void}
         */
        fetch("/heartbeat", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ email: email }),
        }).then((response) => {
            if (!response.ok) {
                console.error("Heartbeat failed:", response.statusText);
            }
        }).catch((error) => console.error("Heartbeat error:", error));
    }, 10000); // Every 10 seconds
}

/**
 * Retrieves the value of a cookie by its name.
 * 
 * @function
 * @param {string} name - The name of the cookie to retrieve.
 * @returns {string|null} - The value of the cookie, or null if the cookie is not found.
 */
function getCookie(name) {
    const value = `; ${document.cookie}`;
    const parts = value.split(`; ${name}=`);
    if (parts.length === 2) return parts.pop().split(";").shift();
}
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#changeLanguage">changeLanguage</a></li><li><a href="global.html#currentLanguage">currentLanguage</a></li><li><a href="global.html#disableAllButtons">disableAllButtons</a></li><li><a href="global.html#email">email</a></li><li><a href="global.html#getBotResponse">getBotResponse</a></li><li><a href="global.html#getCalendar">getCalendar</a></li><li><a href="global.html#getCookie">getCookie</a></li><li><a href="global.html#getLocalizedText">getLocalizedText</a></li><li><a href="global.html#handleQuestionClick">handleQuestionClick</a></li><li><a href="global.html#initializeMenuBehavior">initializeMenuBehavior</a></li><li><a href="global.html#isBisestile">isBisestile</a></li><li><a href="global.html#reloadMonthNames">reloadMonthNames</a></li><li><a href="global.html#scrollToBottom">scrollToBottom</a></li><li><a href="global.html#setFebruaryDays">setFebruaryDays</a></li><li><a href="global.html#setLangFlagFromStorage">setLangFlagFromStorage</a></li><li><a href="global.html#showInitialMessage">showInitialMessage</a></li><li><a href="global.html#toggleChatbot">toggleChatbot</a></li><li><a href="global.html#toggleInformationForm">toggleInformationForm</a></li><li><a href="global.html#toggleLanguage">toggleLanguage</a></li><li><a href="global.html#toggleLanguageMobile">toggleLanguageMobile</a></li><li><a href="global.html#toggleMenu">toggleMenu</a></li><li><a href="global.html#updateLanguageSwitcher">updateLanguageSwitcher</a></li><li><a href="global.html#updateMonthNames">updateMonthNames</a></li><li><a href="global.html#updateSelectedDateDisplay">updateSelectedDateDisplay</a></li><li><a href="global.html#updateUIWithTranslations">updateUIWithTranslations</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.4</a> on Sun Jan 26 2025 19:45:23 GMT+0100 (Ora standard dellâ€™Europa centrale)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
